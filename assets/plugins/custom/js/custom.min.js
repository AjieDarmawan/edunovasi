// $.ajaxSetup({
//     beforeSend: function (xhr) {
//         var utoken = localStorage.getItem("utoken");
//         if (utoken != "" && typeof utoken !== 'undefined' && utoken !== null) {
//             xhr.setRequestHeader('Authorization', 'Bearer ' + utoken);
//         }
//         xhr.setRequestHeader('Cid', 'ajhyTjJXSkxDZUE9');
//         xhr.setRequestHeader('X-mail', localStorage.getItem("email"));
//     }
// });

function requestdata(mod, target, param, callback) {
    $.ajax({
        url: target,
        type: mod,
        crossDomain: true,
        processData: true,
        data: param,
        contentType: 'application/json',
        dataType: 'json',
        headers: {
            "accept": "application/json",
            "Access-Control-Allow-Origin": "*"
        },
        success: function(res) {
            if (res.kode == '001') {
                callback(res.listdata)
            } else {
                console.log("Prodi kosong dipilih :", res.message);
                return false;
            }
        },
        error: function(jqXHR, textStatus, errorThrown) {
            if (jqXHR.status == 401) {
                window.location.href = "401";
            }
        }
    });
}

function create_paging(id, prop, changeact) {

    if (create_pagination) {
        create_pagination = false;

        var dom_opt = '';
        for (var i = 1; i <= parseInt(prop.totalhalaman); i++) {
            dom_opt += '<option value="' + i + '">' + i + '</option>';
        }
        console.log(prop);
        var dom_page = '<div class="row g-3 my-3">';
        dom_page += '	<div class="col-md-10 my-auto">';
        dom_page += '		<b id="' + id + '_pdari">' + prop.dari + '</b> sampai ';
        dom_page += '		<b id="' + id + '_phingga">' + prop.hingga + '</b> dari ';
        dom_page += '		<b id="' + id + '_ptotaldata">' + prop.totaldata + '</b> data';
        dom_page += '	</div>';
        dom_page += '	<div class="col-md-2 my-auto">';
        dom_page += '		<select id="paging_' + id + '" class="form-select select2_paging">' + dom_opt + '</select>';
        dom_page += '	</div>';
        dom_page += '</div>';

        $("#" + id).html(dom_page);

        $('.select2_paging').select2({ theme: "bootstrap-5" });

        $('#paging_' + id).on('change', function(e) {
            page = this.value;
            changeact();
        });
    } else {
        $("#" + id + "_pdari").html(prop.dari);
        $("#" + id + "_phingga").html(prop.hingga);
        $("#" + id + "_ptotaldata").html(prop.totaldata);
    }
}

$(function() {
    $(document).scroll(function() {

        var $nav = $(".navbar-custom");
        // $nav.toggleClass('scrolled', $(this).scrollTop() > $nav.height());
        $nav.toggleClass('scrolled', $(this).scrollTop() > $nav.height());

    });
    $(document).trigger('scroll');
});